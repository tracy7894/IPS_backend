# --- IG è¨­å®š ---
ig:
  profiles:
    patient: "http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips"
    allergyintolerance: "http://hl7.org/fhir/uv/ips/StructureDefinition/AllergyIntolerance-uv-ips"
    condition: "http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips"
    # --- åŠ ä¸Šé€™ä¸€è¡Œ ---
    immunization: "http://hl7.org/fhir/uv/ips/StructureDefinition/Immunization-uv-ips"
  # ... (Condition è¦å‰‡çš„çµå°¾)
type_router:
  # ğŸ’‰ é é˜²æ¥ç¨®è³‡æ–™ åŠ‘æ¬¡è¦è£œ
  - source: "$.ç—…æ‚£æ¸…å–®[*].é é˜²æ¥ç¨®æ¸…å–®[*]"
    make: "Immunization"
    fields:
      # æ¥ç¨®ç‹€æ…‹ (å¿…å¡«)ã€‚
      status: "$.æ¥ç¨®ç‹€æ…‹"

      # ç–«è‹—ä»£ç¢¼ (å¿…å¡«)
      vaccineCode:
        coding:
          - system: "$.ç–«è‹—ä»£ç¢¼.ç³»çµ±"
            code: "$.ç–«è‹—ä»£ç¢¼.ä»£ç¢¼"
            display: "$.ç–«è‹—ä»£ç¢¼.è‹±æ–‡åç¨±"
        text: "$.ç–«è‹—ä»£ç¢¼.ä¸­æ–‡åç¨±"
        
      # ç—…äºº (å¿…å¡«)
      patient:
        reference: "$.é—œè¯ç—…æ‚£.reference"
        display: "$.é—œè¯ç—…æ‚£.display"

      # æ¥ç¨®æ—¥æœŸ (å¿…å¡«)
      occurrenceDateTime: "$.æ¥ç¨®æ—¥æœŸ"
# --- è¼¸å‡ºåˆ†çµ„ ---
output_groups:
  - name: "IPS"
    filename: "IPS.flash"
    resources: ["Immunization"]